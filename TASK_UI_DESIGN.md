# 准备出警功能 UI 设计文档

> 设计视角：30年UI/UX设计经验  
> 设计日期：2025-12-23

---

## 🎯 功能需求

1. **准备出警**：创建新任务时输入4位数密码
2. **任务完成**：完成任务时验证密码
3. **任务状态**：显示当前是否有任务在进行

---

## 📐 UI 设计方案

### 方案A：主按钮方案（推荐）⭐

**设计思路**：
- 系统运行正常且无计时器时，将"操作提示"卡片替换为"准备出警"按钮
- 按钮使用消防红色，大尺寸，突出显示
- 有任务时，在顶部状态栏显示任务状态

**布局结构**：
```
┌─────────────────────────────┐
│  [精简状态栏]                │
├─────────────────────────────┤
│                             │
│         📱                  │
│    (大号 NFC 图标)          │
│                             │
│   系统运行正常              │
│   等待 NFC 刷卡             │
│                             │
│  ┌─────────────────────┐  │
│  │  🚨 准备出警          │  │
│  │  (大号红色按钮)      │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────┘
```

**优点**：
- 视觉焦点明确
- 操作路径短
- 符合用户心理模型（准备→执行→完成）

**缺点**：
- 操作提示信息需要移到其他地方

---

### 方案B：双按钮方案

**设计思路**：
- 保留操作提示卡片
- 在操作提示下方添加"准备出警"按钮
- 按钮使用中等尺寸，不抢夺焦点

**布局结构**：
```
┌─────────────────────────────┐
│  [精简状态栏]                │
├─────────────────────────────┤
│                             │
│         📱                  │
│    (大号 NFC 图标)          │
│                             │
│   系统运行正常              │
│   等待 NFC 刷卡             │
│                             │
│  ┌─────────────────────┐  │
│  │  💡 操作提示         │  │
│  │  • 刷卡后自动开始... │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  🚨 准备出警          │  │
│  │  (中等红色按钮)      │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────┘
```

**优点**：
- 保留操作提示
- 信息完整
- 按钮不抢夺焦点

**缺点**：
- 按钮可能不够突出
- 信息密度较高

---

### 方案C：状态栏集成方案

**设计思路**：
- 在顶部状态栏显示任务状态
- 点击状态栏进入准备出警流程
- 主屏幕保持简洁

**布局结构**：
```
┌─────────────────────────────┐
│  [状态栏] [任务状态] [设置] │
├─────────────────────────────┤
│                             │
│         📱                  │
│    (大号 NFC 图标)          │
│                             │
│   系统运行正常              │
│   等待 NFC 刷卡             │
│                             │
│  ┌─────────────────────┐  │
│  │  💡 操作提示         │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────┘
```

**优点**：
- 主屏幕简洁
- 状态信息集中

**缺点**：
- 不够直观
- 需要点击才能操作

---

## 🎨 推荐方案：方案A（主按钮方案）

### 设计细节

#### 1. 准备出警按钮
- **位置**：系统运行正常且无计时器时，替换操作提示卡片
- **样式**：
  - 消防红色背景（#C62828）
  - 白色文字
  - 大尺寸（宽度：屏幕宽度-48dp，高度：80dp）
  - 圆角：12dp
  - 图标：🚨 或 Icons.local_fire_department
  - 文字："准备出警"（24sp，加粗）
- **状态**：
  - 无任务时：显示"准备出警"
  - 有任务时：显示"任务进行中"（灰色，禁用状态）

#### 2. 任务状态显示
- **位置**：顶部状态栏右侧
- **样式**：
  - 无任务：不显示
  - 有任务：显示"任务中"（绿色圆点 + 文字）
  - 点击可查看任务详情

#### 3. 密码输入对话框
- **样式**：
  - 全屏模态对话框
  - 标题："准备出警"
  - 副标题："请输入4位数密码"
  - 4个数字输入框（每个框一个数字）
  - 数字键盘
  - 确认按钮（红色）
  - 取消按钮

#### 4. 任务完成密码验证
- **样式**：
  - 在任务完成确认对话框中添加密码输入
  - 4个数字输入框
  - 验证通过后才能完成

---

## 📱 交互流程

### 准备出警流程
1. 用户点击"准备出警"按钮
2. 弹出密码输入对话框
3. 用户输入4位数密码
4. 点击确认，创建任务
5. 按钮变为"任务进行中"（禁用）
6. 顶部状态栏显示"任务中"

### 任务完成流程
1. 用户点击"任务完成"按钮
2. 弹出确认对话框（包含密码输入）
3. 用户输入密码
4. 验证密码
5. 密码正确：清除所有计时器和报警
6. 密码错误：显示错误提示

---

## 🎯 最终推荐

**采用方案A（主按钮方案）**，原因：
1. ✅ 视觉焦点明确，用户一眼就能看到
2. ✅ 操作路径短，符合用户心理模型
3. ✅ 按钮突出，适合紧急场景
4. ✅ 主屏幕保持简洁，不冗余

**优化建议**：
- 操作提示可以移到设置页面或帮助页面
- 或者以更小的文字显示在按钮下方
- 任务状态在顶部状态栏显示，不占用主屏幕空间

---

## 🔧 技术实现要点

1. **密码存储**：使用SharedPreferences存储任务密码
2. **任务状态**：使用SharedPreferences存储任务状态
3. **密码输入**：使用数字键盘，4个独立的输入框
4. **状态管理**：使用Provider管理任务状态

---

## 📊 视觉层次

1. **第一优先级**：准备出警按钮（红色，大尺寸）
2. **第二优先级**：系统状态（绿色状态栏）
3. **第三优先级**：操作提示（小文字，弱化）

---

## ✅ 设计原则

1. **一眼可见**：准备出警按钮必须突出
2. **操作简单**：点击→输入密码→确认，三步完成
3. **状态清晰**：任务状态一目了然
4. **防误操作**：密码验证防止误操作

